<!DOCTYPE html>


<!--
LICENCE
---------------------------------------------------------------------------------------

This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. 
If a copy of the MPL was not distributed with this file, You can obtain one at 
https://mozilla.org/MPL/2.0/.
---------------------------------------------------------------------------------------

This code comes with absolutely no warranty,
author does not claim that the code is fit for any purpose.
---------------------------------------------------------------------------------------

Copyright (C) 2021 - Kanishka K Rupasinghe 
---------------------------------------------------------------------------------------
-->



<html lang="">


  <head>
    
    <meta charset="utf-8">
    <title>Application Form Example</title>
    
    
    <script type="text/javascript" src="jquery-3.6.0.min.js"> </script>

    
    <script>
    
    
        $(document).ready( 
        
            function(){
    
                document.getElementById("done").setAttribute('disabled','disabled');
    
                if( $("#records tbody").length == 0 ){
                    $("#records").append("<tbody></tbody>");
                }
                
                   
                $("#nameField").keyup(
                    
                    function(){  
                    
                        if( checkAllFields() ){
                        
                            document.getElementById("done").removeAttribute('disabled');
                            
                        } else {
                        
                            document.getElementById("done").setAttribute('disabled','disabled');
                        }
                    }
                    
                );
                
                
                 $("#phoneField").keyup(
                    
                    function(){  
                    
                        if( checkAllFields() ){
                        
                            document.getElementById("done").removeAttribute('disabled');
                            
                        } else {
                            
                            document.getElementById("done").setAttribute('disabled','disabled');
                        }
                    }
                    
                );
                
                
                $("#emailField").keyup(
                    
                    function(){  
                    
                        if( checkAllFields() ){
                        
                            document.getElementById("done").removeAttribute('disabled');
                            
                        } else {
                            
                            document.getElementById("done").setAttribute('disabled','disabled');
                        }
                    }
                );
                
                
                $("#dateField").change(
                    
                    function(){  
                    
                        if( checkAllFields() ){
                        
                            document.getElementById("done").removeAttribute('disabled');
                            
                        } else {
                            
                            document.getElementById("done").setAttribute('disabled','disabled');
                        }
                    }
                );
                
                
                $("#chosenLang").change(
                
                    function(){  
                    
                        if( checkAllFields() ){
                        
                            document.getElementById("done").removeAttribute('disabled');
                            
                        } else {
                            
                            document.getElementById("done").setAttribute('disabled','disabled');
                        }
                    }
                    
                );
                
                
                $("#termsAgreement").change(
                
                    function(){  
                    
                        if( checkAllFields() ){
                        
                            document.getElementById("done").removeAttribute('disabled');
                            
                        } else {
                            
                            document.getElementById("done").setAttribute('disabled','disabled');
                        }
                    }
                );
                
                
                
            }
        );
        
        
        //addRecord function gets the values input into the form and
        //adds a table record into the records table.
        //validation is done first.
        
        function addRecord(){
    
            //getting values from the form fields
            var nameVal = $("#nameField").val();       
            var phoneVal = $("#phoneField").val();     
            var emailVal = $("#emailField").val();     
            
            var dateVal = $("#dateField").val();       
            var langChoice = $("#chosenLang").val();   
    
    
            //'checked' is an attribute defined at the checkbox element.
            var agreement = $("#termsAgreement").prop("checked");  
    
            //add the values into the table as a record.
            $("#records tbody").append(
                "<tr>"+
                    "<td>"+nameVal+"</td>"+
                    "<td>"+phoneVal+"</td>"+
                    "<td>"+emailVal+"</td>"+
                    "<td>"+dateVal+"</td>"+
                    "<td>"+langChoice+"</td>"+
                    "<td>"+agreement+"</td>"+
                "</tr>"
            );
            
        }

        
        function checkAllFields(){
        
            var allFieldsGo = false;
            
            
            var oneFilled = checkFieldFilled(1);
            var twoFilled = checkFieldFilled(2);
            var threeFilled = checkFieldFilled(3);
            var fourFilled = checkFieldFilled(4);
            var fiveFilled = checkFieldFilled(5);
            var sixFilled = checkFieldFilled(6);
            
            var oneValid = validateField(1);
            var twoValid = validateField(2);
            var threeValid = validateField(3);
            var fourValid = validateField(4);
            var fiveValid = validateField(5);
            var sixValid = validateField(6);
            
            
            if( oneFilled && twoFilled && threeFilled && fourFilled && fiveFilled && sixFilled ){
                        
                if( oneValid && twoValid && threeValid && fourValid && fiveValid && sixValid ){
                
                    allFieldsGo = true;
                
                } else { allFieldsGo = false; }
                

            } else { 
        
                allFieldsGo = false;
            }
            
            
            return allFieldsGo;
        }
        
        
    
        
        function checkFieldFilled(fieldIndex){
        
            var fieldFilled = false;
            
            var checkedValue = "";
            
            switch(fieldIndex){
            
                case 1: 
                    
                    checkedValue = $("#nameField").val();
                
                    if( checkedValue != null && checkedValue != "" && checkedValue != "undefined"){
                    
                        fieldFilled = true;
                    } 
                
                    break;
                    
                case 2: 
                
                    checkedValue = $("#phoneField").val();
                
                    if( checkedValue != null && checkedValue != "" && checkedValue != "undefined"){
                    
                        fieldFilled = true;
                    }
                    
                    break;
                    
                case 3: 
                
                    checkedValue = $("#emailField").val();
                
                    if( checkedValue != null && checkedValue != "" && checkedValue != "undefined"){
                    
                        fieldFilled = true;
                    } 
                
                    break;
                    
                case 4: 
                
                    checkedValue = $("#dateField").val();
                
                    if( checkedValue != "YYYY-MM-DD" && checkedValue != ""){

                        fieldFilled = true;
                    } 
                
                    break;
                    
                case 5: 
                
                    checkedValue = $("#chosenLang").val();
                
                
                    if( checkedValue != "choose"){
                    
                        fieldFilled = true;
                    } 
                
                    break;
                    
                case 6: 
                
                    checkedValue = $("#termsAgreement").is(":checked");
                
                    if(checkedValue){
                    
                        fieldFilled = true;
                        
                    } 
                
                    break;
                    
                default: break;
                
            }
            
            return fieldFilled;
            
        }
        
        
        function validateField(fieldIndex){
            
            var fieldValid = false;
            
            switch(fieldIndex){
            
                case 1: 
                    
                    var checkedValue = $("#nameField").val();
                
                    //country code issue...
                    const patternName = /^[a-z ,.'-]+$/i;
                
                    if( patternName.test(checkedValue) ){
                    
                        fieldValid = true;
                        
                        $("#nameErrorLbl").text("");
                        
                    } else { 
                    
                        $("#nameErrorLbl").text("please enter a text name, no numbers or symbols.");
                    }
                
                    break;
                    
                case 2: 
                
                    var checkedValue = $("#phoneField").val();
                
                    const patternPhone = /^\+?[0-9]+$/i;
                
                    if( patternPhone.test(checkedValue) ){
                    
                        fieldValid = true;
                        
                        $("#phoneErrorLbl").text("");
                        
                    } else {
                    
                        $("#phoneErrorLbl").text("please enter a phone number, and do not use spaces");
                    }
                
                    break;
                    
                case 3: 
                
                    var checkedValue = $("#emailField").val();
                
                    const patternEmail = /(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;
                
                    if( patternEmail.test(checkedValue) ){
                    
                        fieldValid = true;
                        
                        $("#emailErrorLbl").text("");
                        
                    } else {
                    
                        $("#emailErrorLbl").text("please enter a valid email address.");
                    }
                
                    break;
                    
                case 4: 
                    //no specific validation
                    
                    var checkedValue = $("#dateField").val();
                    
                    if(checkedValue != "YYYY-MM-DD" && checkedValue != ""){
                    
                        fieldValid = true;
                        
                        $("#dateErrorLbl").text("");
                        
                    } else {
                    
                        $("#dateErrorLbl").text("please select a date.");
                    }
                    
                    break;
                    
                case 5: 
                
                    var checkedValue = $("#chosenLang").val();
                
                    if(checkedValue != "choose"){
                    
                        fieldValid = true;
                        
                        $("#langErrorLbl").text("");
                        
                    } else {  
                    
                        $("#langErrorLbl").text("please select a language.");
                    }
                
                    break;
                    
                case 6: 
                    
                    var checkedValue = $("#termsAgreement").is(":checked");
                
                    if(checkedValue){
                    
                        fieldValid = true;
                        
                        $("#termsErrorLbl").text("");
                        
                    } else { 
                    
                        $("#termsErrorLbl").text("please agree to the application terms.");
                    
                    }
                
                    break;
                    
                default: break;
                
            }
            
            return fieldValid;
        }
        
        
        
        
    </script>
    
    
    
    
    <!--styling for the html page-->
    <style>
    
        table, th, td {
            border : 1px solid black;    
        }
        
 
    </style>
    
    
    
  </head>
  
  
  
  
  <body>
  
    <header></header>
    
    <main>

    
    <!--have to use onsubmit return false, otherwise the form resets itself on submit-button click -->
    <form name="input_fields" onsubmit="return false">
    
        <!--enter name-->
        <div>
        <label>Name:</label>
        <input id="nameField" type="text" maxlength="100" required validation >
        <label id="nameErrorLbl"></label>
        </div>
        
        <!--enter phone number-->
        <div>
        <label>Phone Number:</label>
        <input id="phoneField" type="text" maxlength="10" required validation >
        <label id="phoneErrorLbl"></label>
        </div>
        
        <!--enter phone number-->
        <div>
        <label>Email Address:</label>
        <input id="emailField" type="email" required validation >
        <label id="emailErrorLbl"></label>
        </div>
        
        <br>
        <br>
        
        
        <!--select date from a date menu-->
        <div>
        <label>Date Applying:</label>
        <input id="dateField" type="date" required validation >
        <label id="dateErrorLbl"></label>
        </div>
        
        <br>
        <br>
        
        <div>
        <label>Preferred Language:</label>
        
        <!--select language dropdown-->
        <select id="chosenLang" name="Languages" required>
            <option value="choose"> -Choose Language- </option>
            <option value="english"> English </option>
            <option value="french"> French </option>
            <option value="spanish"> Spanish </option>
        </select>
        
        <label id="langErrorLbl"></label>
        
        </div>
        
        <br>
        <br>
        
        <!--agree to terms checkbox-->
        <div>
        <label>Agree to terms:</label>
        <input id="termsAgreement" type="checkbox" required validation >
        <label id="termsErrorLbl"></label>
        </div>
        
        <br>
        <br>
        
        <!--submit details button-->
        <button id="done" type="submit" onclick="addRecord()">Submit Details</button>
        
    </form>

        <br>
        <br>
    
    
    
    <!-- the table holds the input values as record rows -->
    <table id="records" class="table">
        
        <thead>
            <tr>
                <th>Name</th>
                <th>Phone Number</th>
                <th>Email Address</th>
                <th>Date Applying</th>
                <th>Preferred Language</th>
                <th>Agreed to terms</th>
            </tr>
        </thead>
        
        <!--this is needed to hold data records-->
        <tbody> </tbody>
        
    </table>
    
    </main>

    
    
    <footer></footer>
    
  </body>

</html>
